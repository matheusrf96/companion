function uuidv4(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))}function detailDataFormat(e){const t=new URLSearchParams(window.location.search);return t.get("source_id")?{sourceId:t.get("source_id")?parseInt(t.get("source_id")):null,utmSource:t.get("utm_source"),utmMedium:t.get("utm_medium"),tags:t.get("tags")?t.get("tags").split(","):[]}:{}}sessionStorage.getItem("uuid")||sessionStorage.setItem("uuid",uuidv4());const socket=new WebSocket("ws://localhost:8000/ws"),uuid=sessionStorage.getItem("uuid"),ecommerceHashInput=document.getElementById("eh"),detailData=detailDataFormat(new URLSearchParams(window.location.search));let ecommerceHash=null;ecommerceHashInput&&(ecommerceHash=ecommerceHashInput.value);const data={uuid:uuid,ecommerceHash:ecommerceHash,referrer:document.referrer,cookie:document.cookie,userAgent:window.navigator.userAgent,query:window.location.search,screen:{availHeight:screen.availHeight,availWidth:screen.availWidth,height:screen.height,width:screen.width,colorDepth:screen.colorDepth,pixelDepth:screen.pixelDepth},navigator:{hardwareConcurrency:navigator.hardwareConcurrency,language:navigator.language,languages:navigator.languages},detailData:detailData};socket.onopen=()=>{socket.send(JSON.stringify(data))};